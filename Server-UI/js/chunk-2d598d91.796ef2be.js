(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d598d91"],{"0db5":function(e,t,a){"use strict";a.d(t,"j",(function(){return r})),a.d(t,"l",(function(){return i})),a.d(t,"r",(function(){return o})),a.d(t,"s",(function(){return l})),a.d(t,"e",(function(){return s})),a.d(t,"u",(function(){return p})),a.d(t,"n",(function(){return u})),a.d(t,"m",(function(){return c})),a.d(t,"h",(function(){return d})),a.d(t,"i",(function(){return m})),a.d(t,"q",(function(){return v})),a.d(t,"o",(function(){return h})),a.d(t,"b",(function(){return f})),a.d(t,"a",(function(){return b})),a.d(t,"f",(function(){return g})),a.d(t,"k",(function(){return w})),a.d(t,"p",(function(){return y})),a.d(t,"t",(function(){return x})),a.d(t,"d",(function(){return k})),a.d(t,"c",(function(){return _})),a.d(t,"g",(function(){return D}));var n=a("8238");function r(e,t){n["a"].get("/private/project").then(e).catch(t)}function i(e,t,a){n["a"].get("/private/project/"+e).then(t).catch(a)}function o(e,t,a){n["a"].post("/private/project/",e).then(t).catch(a)}function l(e,t,a){n["a"].post("/private/project/fromJson",e).then(t).catch(a)}function s(e,t,a){n["a"].post("/private/project/copy/"+e).then(t).catch(a)}function p(e,t,a){n["a"].put("/private/project/",e).then(t).catch(a)}function u(e,t,a){n["a"].put("/private/project/moveUp/"+e).then(t).catch(a)}function c(e,t,a){n["a"].put("/private/project/moveDown/"+e).then(t).catch(a)}function d(e,t,a){n["a"].delete("/private/project/"+e).then(t).catch(a)}function m(e,t,a){n["a"].get("/private/project/apiGroup/"+e).then(t).catch(a)}function v(e,t,a){n["a"].post("/private/apiGroup",e).then(t).catch(a)}function h(e,t,a){n["a"].put("/private/apiGroup",e).then(t).catch(a)}function f(e,t,a){n["a"].put("/private/apiGroup/moveUp/"+e).then(t).catch(a)}function b(e,t,a){n["a"].put("/private/apiGroup/moveDown/"+e).then(t).catch(a)}function g(e,t,a){n["a"].delete("/private/apiGroup/"+e).then(t).catch(a)}function w(e,t,a){n["a"].get("/private/api/"+e).then(t).catch(a)}function y(e,t,a){n["a"].post("/private/api",e).then(t).catch(a)}function x(e,t,a){n["a"].put("/private/api",e).then(t).catch(a)}function k(e,t,a){n["a"].put("/private/api/moveUp/"+e).then(t).catch(a)}function _(e,t,a){n["a"].put("/private/api/moveDown/"+e).then(t).catch(a)}function D(e,t,a){n["a"].delete("/private/api/"+e).then(t).catch(a)}},"28a5":function(e,t,a){"use strict";var n=a("aae3"),r=a("cb7c"),i=a("ebd6"),o=a("0390"),l=a("9def"),s=a("5f1b"),p=a("520a"),u=a("79e5"),c=Math.min,d=[].push,m="split",v="length",h="lastIndex",f=4294967295,b=!u((function(){RegExp(f,"y")}));a("214f")("split",2,(function(e,t,a,u){var g;return g="c"=="abbc"[m](/(b)*/)[1]||4!="test"[m](/(?:)/,-1)[v]||2!="ab"[m](/(?:ab)*/)[v]||4!="."[m](/(.?)(.?)/)[v]||"."[m](/()()/)[v]>1||""[m](/.?/)[v]?function(e,t){var r=String(this);if(void 0===e&&0===t)return[];if(!n(e))return a.call(r,e,t);var i,o,l,s=[],u=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),c=0,m=void 0===t?f:t>>>0,b=new RegExp(e.source,u+"g");while(i=p.call(b,r)){if(o=b[h],o>c&&(s.push(r.slice(c,i.index)),i[v]>1&&i.index<r[v]&&d.apply(s,i.slice(1)),l=i[0][v],c=o,s[v]>=m))break;b[h]===i.index&&b[h]++}return c===r[v]?!l&&b.test("")||s.push(""):s.push(r.slice(c)),s[v]>m?s.slice(0,m):s}:"0"[m](void 0,0)[v]?function(e,t){return void 0===e&&0===t?[]:a.call(this,e,t)}:a,[function(a,n){var r=e(this),i=void 0==a?void 0:a[t];return void 0!==i?i.call(a,r,n):g.call(String(r),a,n)},function(e,t){var n=u(g,e,this,t,g!==a);if(n.done)return n.value;var p=r(e),d=String(this),m=i(p,RegExp),v=p.unicode,h=(p.ignoreCase?"i":"")+(p.multiline?"m":"")+(p.unicode?"u":"")+(b?"y":"g"),w=new m(b?p:"^(?:"+p.source+")",h),y=void 0===t?f:t>>>0;if(0===y)return[];if(0===d.length)return null===s(w,d)?[d]:[];var x=0,k=0,_=[];while(k<d.length){w.lastIndex=b?k:0;var D,R=s(w,b?d:d.slice(k));if(null===R||(D=c(l(w.lastIndex+(b?0:k)),d.length))===x)k=o(d,k,v);else{if(_.push(d.slice(x,k)),_.length===y)return _;for(var S=1;S<=R.length-1;S++)if(_.push(R[S]),_.length===y)return _;k=x=D}}return _.push(d.slice(x)),_}]}))},"2caf":function(e,t,a){var n=a("5ca1");n(n.S,"Array",{isArray:a("1169")})},ba04:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._m(0),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dataLoading,expression:"dataLoading"}],staticStyle:{width:"98%","max-width":"1240px",margin:"0 auto 50px"}},[a("el-form",{ref:"apiForm",attrs:{"label-position":"right","label-width":"120px",model:e.api,rules:e.apiRules}},[a("el-form-item",{attrs:{label:"Method"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.api.method,callback:function(t){e.$set(e.api,"method",t)},expression:"api.method"}},[a("el-option",{attrs:{value:"get"}},[e._v("get")]),a("el-option",{attrs:{value:"head"}},[e._v("head")]),a("el-option",{attrs:{value:"post"}},[e._v("post")]),a("el-option",{attrs:{value:"put"}},[e._v("put")]),a("el-option",{attrs:{value:"delete"}},[e._v("delete")]),a("el-option",{attrs:{value:"options"}},[e._v("options")]),a("el-option",{attrs:{value:"patch"}},[e._v("patch")]),a("el-option",{attrs:{value:"trace"}},[e._v("trace")]),a("el-option",{attrs:{value:"connect"}},[e._v("connect")]),a("el-option",{attrs:{value:"other"}},[e._v("other")])],1),a("div",{staticStyle:{display:"inline-block","margin-left":"10px"}},[a("span",[e._v("接口状态: ")]),a("el-radio",{attrs:{label:"false"},model:{value:e.api.deprecated,callback:function(t){e.$set(e.api,"deprecated",t)},expression:"api.deprecated"}},[e._v("服务中")]),a("el-radio",{attrs:{label:"true"},model:{value:e.api.deprecated,callback:function(t){e.$set(e.api,"deprecated",t)},expression:"api.deprecated"}},[e._v("已过期(以后会删除)")])],1)],1),a("el-form-item",{attrs:{prop:"path",label:"Path"}},[a("el-input",{attrs:{placeholder:"URL上的path,必填,已/开始,如果没有系统会自动加上/ ,path参数请加上英文{},示例:{id}"},model:{value:e.api.path,callback:function(t){e.$set(e.api,"path",t)},expression:"api.path"}})],1),a("el-form-item",{attrs:{prop:"title",label:"接口名称"}},[a("el-input",{attrs:{placeholder:"接口的名称,必填 "},model:{value:e.api.title,callback:function(t){e.$set(e.api,"title",t)},expression:"api.title"}})],1),a("el-form-item",{attrs:{label:"详细说明"}},[a("el-input",{attrs:{type:"textarea",placeholder:"接口的详细描述,支持HTML"},model:{value:e.api.description,callback:function(t){e.$set(e.api,"description",t)},expression:"api.description"}})],1),a("el-form-item",{attrs:{label:"排序"}},[a("el-input",{attrs:{type:"number",placeholder:"接口在分组中的排序"},model:{value:e.api.sorts,callback:function(t){e.$set(e.api,"sorts",t)},expression:"api.sorts"}})],1),a("el-form-item",{attrs:{label:"Consumes"}},[a("el-input",{attrs:{placeholder:"consumes 多个以英文的,号分开"},model:{value:e.api.consumes,callback:function(t){e.$set(e.api,"consumes",t)},expression:"api.consumes"}})],1),a("el-form-item",{attrs:{label:"请求参数"}},[a("div",[a("el-table",{staticClass:"min-height-table",staticStyle:{width:"100%"},attrs:{data:e.parameters,"row-key":"tableRowkey",border:"","default-expand-all":"","tree-props":{children:"items",hasChildren:"hasChildren"}}},[a("el-table-column",{attrs:{prop:"required",label:"必填",width:"80",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-checkbox",{directives:[{name:"show",rawName:"v-show",value:1==t.row.tableRowLevel,expression:"scope.row.tableRowLevel == 1"}],staticStyle:{width:"100%"},model:{value:t.row.required,callback:function(a){e.$set(t.row,"required",a)},expression:"scope.row.required"}})]}}])}),a("el-table-column",{attrs:{prop:"in",label:"参数位置",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{directives:[{name:"show",rawName:"v-show",value:1==t.row.tableRowLevel,expression:"scope.row.tableRowLevel == 1"}],attrs:{placeholder:"请选择"},model:{value:t.row.in,callback:function(a){e.$set(t.row,"in",a)},expression:"scope.row.in"}},[a("el-option",{attrs:{value:"query"}},[e._v("query")]),a("el-option",{attrs:{value:"body"}},[e._v("body")]),a("el-option",{attrs:{value:"path"}},[e._v("path")]),a("el-option",{attrs:{value:"header"}},[e._v("header")])],1)]}}])}),a("el-table-column",{attrs:{prop:"type",label:"参数类型",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:"请选择"},model:{value:t.row.type,callback:function(a){e.$set(t.row,"type",a)},expression:"scope.row.type"}},[a("el-option",{attrs:{value:"string"}},[e._v("string")]),a("el-option",{attrs:{value:"int"}},[e._v("int")]),a("el-option",{attrs:{value:"long"}},[e._v("long")]),a("el-option",{attrs:{value:"object"}},[e._v("object")]),a("el-option",{attrs:{value:"array"}},[e._v("array")]),a("el-option",{attrs:{value:"float"}},[e._v("float")]),a("el-option",{attrs:{value:"double"}},[e._v("double")]),a("el-option",{attrs:{value:"number"}},[e._v("number")]),a("el-option",{attrs:{value:"boolean"}},[e._v("boolean")])],1)]}}])}),a("el-table-column",{attrs:{prop:"name",label:"参数名称",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"请输入参数名称"},model:{value:t.row.name,callback:function(a){e.$set(t.row,"name",a)},expression:"scope.row.name"}})]}}])}),a("el-table-column",{attrs:{prop:"description",label:"参数描述"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticStyle:{margin:"5px auto"},attrs:{type:"textarea",autosize:{minRows:1,maxRows:3},placeholder:"请输入参数描述,支持HTML"},model:{value:t.row.description,callback:function(a){e.$set(t.row,"description",a)},expression:"scope.row.description"}})]}}])}),a("el-table-column",{attrs:{label:"操作",width:"65"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{placement:"left-start",trigger:"click"}},[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.tableColumnMove(t.row,t.row.tableRowkey,0)}}},[e._v("上移")]),a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.tableColumnMove(t.row,t.row.tableRowkey,1)}}},[e._v("下移")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:"boolean"!=t.row.type,expression:"scope.row.type != 'boolean'"}],attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.showParameterEdit(t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.tableColumnRemove(t.row)}}},[e._v("删除")]),a("el-button",{attrs:{slot:"reference",size:"mini",icon:"el-icon-edit"},slot:"reference"})],1)]}}])})],1),a("div",{staticStyle:{"text-align":"right","margin-top":"5px"}},[a("div",{staticStyle:{"text-align":"right"}},[a("el-button",{on:{click:function(t){return e.addParameter()}}},[e._v("添加参数")])],1)]),a("div",[a("el-input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:10},placeholder:'请求的body,定义格式或占位或schema,比如请求格式要求为:{"id":{id},"name":"userName"},{id}代表变量请求时会自动填充body参数'},model:{value:e.api.body,callback:function(t){e.$set(e.api,"body",t)},expression:"api.body"}})],1)],1)]),a("el-form-item",{attrs:{label:"Produces"}},[a("el-input",{attrs:{placeholder:"produces 多个以英文的,号分开"},model:{value:e.api.produces,callback:function(t){e.$set(e.api,"produces",t)},expression:"api.produces"}})],1),a("el-form-item",{attrs:{label:"响应结果"}},[a("div",[e._l(e.responses,(function(t,n){return a("div",{key:n,staticStyle:{border:"1px solid #c6e2ff",padding:"5px","margin-bottom":"5px"}},[a("div",{staticStyle:{display:"flex"}},[a("div",{staticStyle:{width:"10%","min-width":"50px","margin-right":"5px"}},[e._v("状态码:")]),a("div",{staticStyle:{width:"30%","margin-right":"5px"}},[a("el-input",{attrs:{placeholder:"响应状态码"},model:{value:t.status,callback:function(a){e.$set(t,"status",a)},expression:"resp.status"}})],1),a("div",{staticStyle:{width:"10%","min-width":"60px","margin-right":"5px"}},[e._v("状态信息:")]),a("div",{staticStyle:{width:"100%"}},[a("el-input",{attrs:{placeholder:"响应状态信息"},model:{value:t.msg,callback:function(a){e.$set(t,"msg",a)},expression:"resp.msg"}})],1)]),a("div",[e._v("响应数据:")]),a("el-table",{staticClass:"min-height-table",staticStyle:{width:"100%"},attrs:{data:t.data,"row-key":"tableRowkey",border:"","default-expand-all":"","tree-props":{children:"items",hasChildren:"hasChildren"}}},[a("el-table-column",{attrs:{prop:"in",label:"位置",width:"180",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.tableRowLevel?a("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"请选择"},model:{value:t.row.in,callback:function(a){e.$set(t.row,"in",a)},expression:"scope.row.in"}},[a("el-option",{attrs:{value:"body"}},[e._v("body")]),a("el-option",{attrs:{value:"header"}},[e._v("header")])],1):e._e()]}}],null,!0)}),a("el-table-column",{attrs:{prop:"tableRowLevel",label:"层级",width:"60"}}),a("el-table-column",{attrs:{prop:"type",label:"参数类型",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"请选择"},model:{value:t.row.type,callback:function(a){e.$set(t.row,"type",a)},expression:"scope.row.type"}},[a("el-option",{attrs:{value:"string"}},[e._v("string")]),a("el-option",{attrs:{value:"int"}},[e._v("int")]),a("el-option",{attrs:{value:"long"}},[e._v("long")]),a("el-option",{attrs:{value:"object"}},[e._v("object")]),a("el-option",{attrs:{value:"array"}},[e._v("array")]),a("el-option",{attrs:{value:"float"}},[e._v("float")]),a("el-option",{attrs:{value:"double"}},[e._v("double")]),a("el-option",{attrs:{value:"number"}},[e._v("number")]),a("el-option",{attrs:{value:"boolean"}},[e._v("boolean")])],1)]}}],null,!0)}),a("el-table-column",{attrs:{prop:"name",label:"参数名称",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"请输入参数名称"},model:{value:t.row.name,callback:function(a){e.$set(t.row,"name",a)},expression:"scope.row.name"}})]}}],null,!0)}),a("el-table-column",{attrs:{prop:"description",label:"参数描述"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticStyle:{margin:"5px auto"},attrs:{type:"textarea",autosize:{minRows:1,maxRows:3},placeholder:"请输入参数描述,支持HTML"},model:{value:t.row.description,callback:function(a){e.$set(t.row,"description",a)},expression:"scope.row.description"}})]}}],null,!0)}),a("el-table-column",{attrs:{label:"操作",width:"65"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{placement:"left-start",trigger:"click"}},[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.tableColumnMove(t.row,t.row.tableRowkey,0)}}},[e._v("上移")]),a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.tableColumnMove(t.row,t.row.tableRowkey,1)}}},[e._v("下移")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:"object"==t.row.type||"array"==t.row.type,expression:"scope.row.type == 'object' || scope.row.type == 'array'"}],attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.addDataItems(t.row)}}},[e._v("添加参数")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.tableColumnRemove(t.row)}}},[e._v("删除")]),a("el-button",{attrs:{slot:"reference",size:"mini",icon:"el-icon-edit"},slot:"reference"})],1)]}}],null,!0)})],1),a("div",{staticStyle:{"text-align":"right","padding-top":"3px"}},[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.removeResponseData(n)}}},[e._v("移除")]),a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.addResponseData(t.data)}}},[e._v("添加参数")])],1)],1)})),a("div",{staticStyle:{"text-align":"right"}},[a("el-button",{on:{click:function(t){return e.addResponse()}}},[e._v("添加更多")])],1)],2)]),a("el-form-item",{attrs:{label:"附加文档URL"}},[a("el-input",{attrs:{placeholder:"请输入附加文档的URL"},model:{value:e.api.exDurl,callback:function(t){e.$set(e.api,"exDurl",t)},expression:"api.exDurl"}})],1),a("el-form-item",{attrs:{label:"附加文档说明"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入附加文档的描述,支持HTML"},model:{value:e.api.exDdescription,callback:function(t){e.$set(e.api,"exDdescription",t)},expression:"api.exDdescription"}})],1),e.additional.length>0?a("el-form-item",{attrs:{label:"附加说明"}},e._l(e.additional,(function(t,n){return a("div",{key:n,staticStyle:{border:"1px solid #CCC",padding:"5px","margin-bottom":"5px"}},[a("el-input",{attrs:{placeholder:"附加标题标题"},model:{value:t.title,callback:function(a){e.$set(t,"title",a)},expression:"add.title"}}),a("el-input",{attrs:{type:"textarea",placeholder:"附加说明描述"},model:{value:t.description,callback:function(a){e.$set(t,"description",a)},expression:"add.description"}}),a("div",{staticStyle:{"text-align":"right","padding-top":"3px"}},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.removeAdditional(n)}}},[e._v("移除")])],1)],1)})),0):e._e(),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitUpdateApi()}}},[e._v("提交修改")])],1)],1)],1),a("el-dialog",{staticStyle:{"max-width":"1240px"},attrs:{title:"数据编辑",width:"80%",visible:e.dialogDataEditVisible},on:{"update:visible":function(t){e.dialogDataEditVisible=t}}},[a("el-form",{attrs:{model:e.parameterData,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"数据类型"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.parameterData.type,callback:function(t){e.$set(e.parameterData,"type",t)},expression:"parameterData.type"}},[a("el-option",{attrs:{value:"string"}},[e._v("string")]),a("el-option",{attrs:{value:"int"}},[e._v("int")]),a("el-option",{attrs:{value:"long"}},[e._v("long")]),a("el-option",{attrs:{value:"object"}},[e._v("object")]),a("el-option",{attrs:{value:"array"}},[e._v("array")]),a("el-option",{attrs:{value:"float"}},[e._v("float")]),a("el-option",{attrs:{value:"double"}},[e._v("double")]),a("el-option",{attrs:{value:"number"}},[e._v("number")]),a("el-option",{attrs:{value:"boolean"}},[e._v("boolean")])],1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"object"==e.parameterData.type||"array"==e.parameterData.type,expression:"parameterData.type == 'object' || parameterData.type == 'array'"}],attrs:{label:"参数说明"}},[a("el-table",{staticClass:"min-height-table",staticStyle:{width:"100%"},attrs:{data:e.parameterData.items,"row-key":"tableRowkey",border:"","default-expand-all":"","tree-props":{children:"items",hasChildren:"hasChildren"}}},[a("el-table-column",{attrs:{prop:"type",label:"参数类型",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:"请选择"},model:{value:t.row.type,callback:function(a){e.$set(t.row,"type",a)},expression:"scope.row.type"}},[a("el-option",{attrs:{value:"string"}},[e._v("string")]),a("el-option",{attrs:{value:"int"}},[e._v("int")]),a("el-option",{attrs:{value:"long"}},[e._v("long")]),a("el-option",{attrs:{value:"object"}},[e._v("object")]),a("el-option",{attrs:{value:"array"}},[e._v("array")]),a("el-option",{attrs:{value:"float"}},[e._v("float")]),a("el-option",{attrs:{value:"double"}},[e._v("double")]),a("el-option",{attrs:{value:"number"}},[e._v("number")]),a("el-option",{attrs:{value:"boolean"}},[e._v("boolean")])],1)]}}])}),a("el-table-column",{attrs:{prop:"name",label:"参数名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"请输入参数名称"},model:{value:t.row.name,callback:function(a){e.$set(t.row,"name",a)},expression:"scope.row.name"}})]}}])}),a("el-table-column",{attrs:{prop:"description",label:"参数描述"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticStyle:{margin:"5px auto"},attrs:{type:"textarea",rows:1,placeholder:"请输入参数描述,支持HTML"},model:{value:t.row.description,callback:function(a){e.$set(t.row,"description",a)},expression:"scope.row.description"}})]}}])}),a("el-table-column",{attrs:{label:"操作",width:"65"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{placement:"left-start",trigger:"click"}},[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.tableColumnMove(t.row,t.row.tableRowkey,0)}}},[e._v("上移")]),a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.tableColumnMove(t.row,t.row.tableRowkey,1)}}},[e._v("下移")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:"object"==t.row.type||"array"==t.row.type,expression:"scope.row.type == 'object' || scope.row.type == 'array'"}],attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.addDataItems(t.row)}}},[e._v("添加参数")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.tableColumnRemove(t.row)}}},[e._v("删除")]),a("el-button",{attrs:{slot:"reference",size:"mini",icon:"el-icon-edit"},slot:"reference"})],1)]}}])})],1),a("div",{staticStyle:{"text-align":"right"}},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.addDataItems(e.parameterData)}}},[e._v("添加参数")])],1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"string"==e.parameterData.type,expression:"parameterData.type == 'string'"}],attrs:{label:"最大长度"}},[a("el-input",{attrs:{placeholder:"最大长度"},model:{value:e.parameterData.maxLength,callback:function(t){e.$set(e.parameterData,"maxLength",t)},expression:"parameterData.maxLength"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"string"==e.parameterData.type,expression:"parameterData.type == 'string'"}],attrs:{label:"最小长度"}},[a("el-input",{attrs:{placeholder:"最小长度"},model:{value:e.parameterData.minLength,callback:function(t){e.$set(e.parameterData,"minLength",t)},expression:"parameterData.minLength"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.isNumber(e.parameterData.type),expression:"isNumber(parameterData.type)"}],attrs:{label:"最大值"}},[a("el-input",{attrs:{placeholder:"最大值"},model:{value:e.parameterData.maximum,callback:function(t){e.$set(e.parameterData,"maximum",t)},expression:"parameterData.maximum"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.isNumber(e.parameterData.type),expression:"isNumber(parameterData.type)"}],attrs:{label:"最小值"}},[a("el-input",{attrs:{placeholder:"最小值"},model:{value:e.parameterData.minimum,callback:function(t){e.$set(e.parameterData,"minimum",t)},expression:"parameterData.minimum"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.isCanEnumsOrRegex(e.parameterData.type),expression:"isCanEnumsOrRegex(parameterData.type)"}],attrs:{label:"默认值"}},[a("el-input",{attrs:{placeholder:"默认值"},model:{value:e.parameterData.def,callback:function(t){e.$set(e.parameterData,"def",t)},expression:"parameterData.def"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.isCanEnumsOrRegex(e.parameterData.type),expression:"isCanEnumsOrRegex(parameterData.type)"}],attrs:{label:"枚举值"}},[a("el-input",{attrs:{placeholder:"枚举值,英文,号分隔"},model:{value:e.parameterData.enums,callback:function(t){e.$set(e.parameterData,"enums",t)},expression:"parameterData.enums"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.isCanEnumsOrRegex(e.parameterData.type),expression:"isCanEnumsOrRegex(parameterData.type)"}],attrs:{label:"正则表达式"}},[a("el-input",{attrs:{placeholder:"正则表达式"},model:{value:e.parameterData.pattern,callback:function(t){e.$set(e.parameterData,"pattern",t)},expression:"parameterData.pattern"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogDataEditVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogDataEditVisible=!1}}},[e._v("确 定")])],1)],1)],1)},r=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{width:"98%","max-width":"1240px",padding:"10px 0",margin:"auto",display:"flex","align-items":"center"}},[a("div",[a("b",[e._v("修改API")])])])}],i=(a("7f7f"),a("28a5"),a("f559"),a("a481"),a("2caf"),a("0db5")),o={data:function(){return{projectId:"",groupId:"",apiId:"",dataLoading:!0,api:{method:"get"},apiRules:{path:[{required:!0,message:"请输入Path",trigger:"blur"}],title:[{required:!0,message:"请输入接口的名称",trigger:"blur"}]},parameters:[],dialogDataEditVisible:!1,parameterData:{},responses:[{status:200,msg:"ok",data:[]}],additional:[]}},created:function(){this.projectId=this.$route.params.pid,this.groupId=this.$route.params.gid,this.apiId=this.$route.params.aid,null!=this.apiId?this.loadApi(this.apiId):this.$message.warning("加载信息失败!API的id不能为空!")},methods:{loadApi:function(e){var t=this;null!=e&&""!=e&&(this.dataLoading=!0,Object(i["k"])(e,(function(e){var a=e.data;if(console.log("加载API..."),console.log(a),200==a.code){if(null==a.data.apiId||""==a.data.apiId)return void t.$message.error("获取API信息失败:数据不存在,请检查id是否有误!");if(null!=a.data.additional&&""!=a.data.additional&&(a.data.additional=JSON.parse(a.data.additional)),null!=a.data.externalDocs&&""!=a.data.externalDocs&&(a.data.externalDocs=JSON.parse(a.data.externalDocs),null!=a.data.externalDocs.description&&(a.data.exDdescription=a.data.externalDocs.description),null!=a.data.externalDocs.url&&(a.data.exDurl=a.data.externalDocs.url)),null!=a.data.consumes&&""!=a.data.consumes&&(a.data.consumes=JSON.parse(a.data.consumes).join(",")),null!=a.data.produces&&""!=a.data.produces&&(a.data.produces=JSON.parse(a.data.produces).join(",")),null!=a.data.parameters&&""!=a.data.parameters){for(var n=JSON.parse(a.data.parameters),r=0;r<n.length;r++)n[r].tableRowkey=t.getTableRandomRowKey(),n[r].tableRowLevel=1,n[r].required=1==n[r].required||"true"==n[r].required,n[r].ref=n,null!=n[r].items?t.recursionLoadTableData(n[r]):n[r].items=[];t.parameters=n}else t.parameters=[];if(null!=a.data.responses&&""!=a.data.responses){var i=JSON.parse(a.data.responses);i=null!=i&&i.length>0&&(null==i[0].status||null==i[0].data)?[{status:200,msg:"ok",data:i}]:i;for(r=0;r<i.length;r++)for(var o=i[r].data,l=0;l<o.length;l++){var s=o[l];s.tableRowkey=t.getTableRandomRowKey(),s.tableRowLevel=1,s.ref=o,null!=s.items?t.recursionLoadTableData(s):s.items=[]}t.responses=i}else t.responses=[];null!=a.data.additional&&""!=a.data.additional&&(Array.isArray(a.data.additional)?t.additional=a.data.additional:t.additional=JSON.parse(a.data.additional)),t.api=a.data}else t.$message.error("获取API信息失败:"+a.msg);t.dataLoading=!1}),(function(e){t.$message.error("获取API信息失败,更多信息请查看浏览器控制台!"),console.log(e)})))},recursionLoadTableData:function(e){if(null!=e.items&&0!=e.items.length)for(var t=0;t<e.items.length;t++){var a=e.items[t];a.tableRowkey=this.getTableRandomRowKey(),a.tableRowLevel=e.tableRowLevel+1,a.ref=e.items,null!=a.items?this.recursionLoadTableData(a):a.items=[]}},submitUpdateApi:function(){var e=this;this.$refs.apiForm.validate((function(t){if(!t)return e.$message.warning("修改失败,请按提示完善项目信息!"),!1;var a={};if(a.apiId=e.apiId,a.groupId=e.groupId,a.method=e.api.method,a.deprecated=e.api.deprecated,a.path=e.api.path.replace(/(\/)+/g,"/"),a.path.startsWith("/")||(a.path="/"+a.path),a.title=e.api.title,null!=e.api.description&&""!=e.api.description&&(a.description=e.api.description),isNaN(e.api.sorts)||(a.sorts=parseInt(e.api.sorts)),null!=e.api.consumes&&""!=e.api.consumes){for(var n=e.api.consumes.split(","),r=[],o=0;o<n.length;o++)","!=n[o]&&""!=n[o]&&r.push(n[o]);r.length>0&&(a.consumes=JSON.stringify(r))}if(null!=e.api.produces&&""!=e.api.produces){n=e.api.produces.split(",");var l=[];for(o=0;o<n.length;o++)","!=n[o]&&""!=n[o]&&l.push(n[o]);l.length>0&&(a.produces=JSON.stringify(l))}if(e.parameters.length>0){var s=[];for(o=0;o<e.parameters.length;o++){var p=e.parameters[o];if(null!=p.name&&""!=p.name){var u={required:p.required,in:p.in,type:p.type,name:p.name,description:p.description};if(null!=p.def&&""!=p.def&&(u.def=p.def),null!=p.minLength&&""!=p.minLength&&(u.minLength=p.minLength),null!=p.maxLength&&""!=p.maxLength&&(u.maxLength=p.maxLength),null!=p.minimum&&""!=p.minimum&&(u.minimum=p.minimum),null!=p.maximum&&""!=p.maximum&&(u.maximum=p.maximum),null!=p.enums&&""!=p.enums){n=p.enums.split(",");var c=[];for(o=0;o<n.length;o++)","!=n[o]&&""!=n[o]&&c.push(n[o]);c.length>0&&(u.enums=JSON.stringify(c))}null!=p.pattern&&""!=p.pattern&&(u.pattern=p.pattern),null!=p.items&&p.items.length>0&&(u.items=[],e.recursionConverter(u.items,p.items)),s.push(u)}}a.parameters=JSON.stringify(s)}if(null!=e.api.body&&""!=e.api.body&&(a.body=e.api.body),e.responses.length>0){for(s=[],o=0;o<e.responses.length;o++){p=e.responses[o];if(null!=p.status&&""!=p.status&&null!=p.data&&0!=p.data.length){u={status:p.status,msg:p.msg,data:[]};for(var d=0;d<p.data.length;d++){var m=p.data[d];if(null!=m.name&&""!=m.name){var v={type:m.type,in:m.in,name:m.name,description:m.description};null!=m.items&&m.items.length>0&&(v.items=[],e.recursionConverter(v.items,m.items)),u.data.push(v)}}s.push(u)}}a.responses=JSON.stringify(s)}var h=null;null!=e.api.exDdescription&&(h={description:e.api.exDdescription}),null!=e.api.exDurl&&(null==h&&(h={}),h.url=e.api.exDurl),null!=h&&(a.externalDocs=JSON.stringify(h)),null!=e.additional&&e.additional.length>0&&(a.additional=JSON.stringify(e.additional)),console.log("修改API"),console.log(a),Object(i["t"])(a,(function(t){var a=t.data;200==a.code?e.$confirm("修改成功,是否返回上一页?","修改成功!",{confirmButtonText:"返回",cancelButtonText:"取消",type:"success"}).then((function(){e.$router.go(-1)})).catch((function(){location.reload()})):e.$message.error("修改成功失败:"+a.msg)}),(function(t){e.$message.error("修改成功失败,更多信息请查看浏览器控制台!"),console.log(t)}))}))},recursionConverter:function(e,t){if(null!=t&&0!=t.length)for(var a=0;a<t.length;a++){var n={};n.type=t[a].type,n.name=t[a].name,n.description=t[a].description,null!=t[a].items&&0!=t[a].items.length&&(n.items=[],this.recursionConverter(n.items,t[a].items)),e.push(n)}},addParameter:function(){this.parameters.push({tableRowkey:this.getTableRandomRowKey(),tableRowLevel:1,required:!0,in:"query",type:"string",name:"",description:"",items:[],ref:this.parameters})},showParameterEdit:function(e){this.dialogDataEditVisible=!0,this.parameterData=e},addResponse:function(){this.responses.push({status:null,msg:null,data:[]})},addResponseData:function(e){e.push({tableRowkey:this.getTableRandomRowKey(),tableRowLevel:1,type:"string",name:"",in:"body",description:"",items:[],ref:e})},removeResponseData:function(e){var t=this;this.$confirm("确定移除本响应结果吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.responses.splice(e,1)})).catch((function(){}))},showResponseDataEdit:function(e){this.dialogResponseEditVisible=!0,this.responseEditData=e,console.log(e)},addDataItems:function(e){e.items.push({tableRowkey:this.getTableRandomRowKey(),tableRowLevel:e.tableRowLevel+1,type:"string",name:"",in:"body",description:"",items:[],ref:e.items})},tableColumnMove:function(e,t,a){for(var n=-1,r=e.ref,i=0;i<r.length;i++)if(r[i].tableRowkey==t){n=i;break}if(!(-1==n||0==a&&0==n||1==a&&n==r.length-1)){var o=r[n];0==a?(this.$set(r,n,r[n-1]),this.$set(r,n-1,o)):(this.$set(r,n,r[n+1]),this.$set(r,n+1,o))}},tableColumnRemove:function(e){var t=this;this.$confirm("确定移除行数据吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.findDataAndDelete(e.ref,e.tableRowkey)})).catch((function(){}))},findDataAndDelete:function(e,t){for(var a=0;a<e.length;a++){if(e[a].tableRowkey==t)return void e.splice(a,1);null!=e[a].items&&e[a].items.length>0&&this.findDataAndDelete(e[a].items,t)}},removeAdditional:function(e){var t=this;this.$confirm("确定移除数据吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.additional.splice(e,1)})).catch((function(){}))},isNumber:function(e){return"int"==e||"long"==e||"float"==e||"double"==e||"number"==e},isCanEnumsOrRegex:function(e){return"boolean"!=e&&"object"!=e&&"array"!=e},getTableRandomRowKey:function(){return"rowkey-"+Math.random()}}},l=o,s=a("2877"),p=Object(s["a"])(l,n,r,!1,null,null,null);t["default"]=p.exports}}]);
//# sourceMappingURL=chunk-2d598d91.796ef2be.js.map